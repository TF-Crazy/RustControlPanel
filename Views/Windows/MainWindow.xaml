<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- MainWindow.xaml - Main application window                           -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

<Window x:Class="RustControlPanel.Views.Windows.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:RustControlPanel.ViewModels"
        Title="Rust Control Panel" 
        Height="900" Width="1600"
        MinHeight="700" MinWidth="1200"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        ResizeMode="CanResize">

    <Window.DataContext>
        <vm:MainViewModel/>
    </Window.DataContext>

    <Border Background="{StaticResource BackgroundDarkBrush}"
            BorderBrush="{StaticResource BorderNormalBrush}"
            BorderThickness="1"
            CornerRadius="8">
        
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="40"/>
                <!-- Custom titlebar -->
                <RowDefinition Height="Auto"/>
                <!-- Server info bar -->
                <RowDefinition Height="Auto"/>
                <!-- Navigation tabs -->
                <RowDefinition Height="*"/>
                <!-- Content -->
                <RowDefinition Height="Auto"/>
                <!-- Footer / Status bar -->
            </Grid.RowDefinitions>

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <!-- CUSTOM TITLEBAR                                                  -->
            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <Border Grid.Row="0" 
                    Background="{StaticResource BackgroundMediumBrush}"
                    CornerRadius="8,8,0,0"
                    MouseLeftButtonDown="OnTitleBarMouseDown">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <!-- Logo + Title -->
                    <StackPanel Grid.Column="0" Orientation="Horizontal" Margin="16,0">
                        <TextBlock Text="ðŸŽ®" FontSize="18" VerticalAlignment="Center" Margin="0,0,8,0"/>
                        <TextBlock Text="Rust Control Panel" 
                                   Style="{StaticResource BodyText}"
                                   FontWeight="SemiBold"
                                   VerticalAlignment="Center"/>
                    </StackPanel>

                    <!-- Server info -->
                    <StackPanel Grid.Column="1" 
                                Orientation="Horizontal" 
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center">
                        <Ellipse Width="8" Height="8" 
                                 Fill="{StaticResource AccentGreenBrush}"
                                 Margin="0,0,8,0"
                                 Visibility="{Binding IsConnected, Converter={StaticResource BoolToVisibilityConverter}}"/>
                        <TextBlock Text="{Binding ServerName}" 
                                   Style="{StaticResource SmallText}"
                                   VerticalAlignment="Center"/>
                    </StackPanel>

                    <!-- Window controls -->
                    <StackPanel Grid.Column="2" Orientation="Horizontal">
                        <Button Content="â”" 
                                Style="{StaticResource IconButton}"
                                Command="{Binding MinimizeCommand}"
                                ToolTip="Minimize"
                                Width="40" Height="40"/>
                        <Button Content="â–¡" 
                                Style="{StaticResource IconButton}"
                                Command="{Binding MaximizeCommand}"
                                ToolTip="Maximize"
                                Width="40" Height="40"/>
                        <Button Content="âœ•" 
                                Style="{StaticResource IconButton}"
                                Command="{Binding CloseCommand}"
                                ToolTip="Close"
                                Width="40" Height="40"
                                Foreground="{StaticResource AccentRedBrush}"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <!-- SERVER INFO BAR                                                  -->
            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <Border Grid.Row="1" 
                    Background="{StaticResource BackgroundLightBrush}"
                    BorderBrush="{StaticResource BorderNormalBrush}"
                    BorderThickness="0,1,0,1"
                    Padding="16,10">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <!-- Server name -->
                        <ColumnDefinition Width="*"/>
                        <!-- Stats -->
                        <ColumnDefinition Width="Auto"/>
                        <!-- Actions -->
                    </Grid.ColumnDefinitions>

                    <!-- Server Name -->
                    <StackPanel Grid.Column="0" Orientation="Horizontal" Margin="0,0,32,0">
                        <TextBlock Text="ðŸ–¥ï¸" FontSize="16" Margin="0,0,8,0" VerticalAlignment="Center"/>
                        <TextBlock Text="{Binding ServerName}" 
                                   Style="{StaticResource Heading3}"
                                   VerticalAlignment="Center"
                                   Foreground="{StaticResource AccentBlueBrush}"/>
                    </StackPanel>

                    <!-- Stats -->
                    <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Left">
                        <!-- Players -->
                        <Border Background="{StaticResource BackgroundMediumBrush}"
                                BorderBrush="{StaticResource BorderNormalBrush}"
                                BorderThickness="1"
                                CornerRadius="4"
                                Padding="12,6"
                                Margin="0,0,12,0">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="ðŸ‘¥" FontSize="14" Margin="0,0,8,0" VerticalAlignment="Center"/>
                                <TextBlock Style="{StaticResource BodyText}" VerticalAlignment="Center">
                                    <Run Text="{Binding PlayerCount}" Foreground="{StaticResource AccentGreenBrush}" FontWeight="SemiBold"/>
                                    <Run Text="/" Foreground="{StaticResource TextMutedBrush}"/>
                                    <Run Text="{Binding MaxPlayers}" Foreground="{StaticResource TextSecondaryBrush}"/>
                                </TextBlock>
                            </StackPanel>
                        </Border>

                        <!-- FPS -->
                        <Border Background="{StaticResource BackgroundMediumBrush}"
                                BorderBrush="{StaticResource BorderNormalBrush}"
                                BorderThickness="1"
                                CornerRadius="4"
                                Padding="12,6"
                                Margin="0,0,12,0">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="âš¡" FontSize="14" Margin="0,0,8,0" VerticalAlignment="Center"/>
                                <TextBlock VerticalAlignment="Center">
                                    <TextBlock.Style>
                                        <Style TargetType="TextBlock" BasedOn="{StaticResource BodyText}">
                                            <Setter Property="Text" Value="{Binding ServerFps, StringFormat={}{0:F0} FPS}"/>
                                            <Setter Property="Foreground" Value="{StaticResource AccentGreenBrush}"/>
                                            <Setter Property="FontWeight" Value="SemiBold"/>
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding ServerFps}" Value="0">
                                                    <Setter Property="Text" Value="-- FPS"/>
                                                    <Setter Property="Foreground" Value="{StaticResource TextMutedBrush}"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </TextBlock.Style>
                                </TextBlock>
                            </StackPanel>
                        </Border>
                    </StackPanel>

                    <!-- Actions -->
                    <StackPanel Grid.Column="2" Orientation="Horizontal">
                        <Button Content="ðŸ› Debug"
                                Style="{StaticResource SecondaryButton}"
                                Command="{Binding OpenDebugCommand}"
                                Padding="12,6"
                                Margin="0,0,8,0"/>
                        
                        <Button Content="ðŸ”„ Changer de serveur"
                                Style="{StaticResource SecondaryButton}"
                                Command="{Binding ChangeServerCommand}"
                                Padding="12,6"
                                Margin="0,0,8,0"
                                Visibility="{Binding IsConnected, Converter={StaticResource BoolToVisibilityConverter}}"/>
                        
                        <Button Content="DÃ©connexion"
                                Style="{StaticResource DangerButton}"
                                Command="{Binding DisconnectCommand}"
                                Padding="12,6"
                                Visibility="{Binding IsConnected, Converter={StaticResource BoolToVisibilityConverter}}"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <!-- NAVIGATION TABS                                                  -->
            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <TabControl Grid.Row="3"
                        Style="{StaticResource MainTabControl}"
                        SelectedIndex="{Binding SelectedTabIndex}">

                <!-- Map Tab -->
                <TabItem Style="{StaticResource MainTabItem}">
                    <TabItem.Header>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="ðŸ—ºï¸" FontSize="14" Margin="0,0,8,0"/>
                            <TextBlock Text="Map"/>
                        </StackPanel>
                    </TabItem.Header>
                    <Grid Background="{StaticResource BackgroundDarkBrush}">
                        <TextBlock Text="Map Page (Coming Soon)" 
                                   Style="{StaticResource Heading2}"
                                   HorizontalAlignment="Center"
                                   VerticalAlignment="Center"
                                   Foreground="{StaticResource TextMutedBrush}"/>
                    </Grid>
                </TabItem>

                <!-- Stats Tab -->
                <TabItem Style="{StaticResource MainTabItem}">
                    <TabItem.Header>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="ðŸ“Š" FontSize="14" Margin="0,0,8,0"/>
                            <TextBlock Text="Stats"/>
                        </StackPanel>
                    </TabItem.Header>
                    <Grid Background="{StaticResource BackgroundDarkBrush}">
                        <TextBlock Text="Stats Page (Coming Soon)" 
                                   Style="{StaticResource Heading2}"
                                   HorizontalAlignment="Center"
                                   VerticalAlignment="Center"
                                   Foreground="{StaticResource TextMutedBrush}"/>
                    </Grid>
                </TabItem>

                <!-- Plugins Tab -->
                <TabItem Style="{StaticResource MainTabItem}">
                    <TabItem.Header>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="ðŸ”Œ" FontSize="14" Margin="0,0,8,0"/>
                            <TextBlock Text="Plugins"/>
                        </StackPanel>
                    </TabItem.Header>
                    <Grid Background="{StaticResource BackgroundDarkBrush}">
                        <TextBlock Text="Plugins Page (Coming Soon)" 
                                   Style="{StaticResource Heading2}"
                                   HorizontalAlignment="Center"
                                   VerticalAlignment="Center"
                                   Foreground="{StaticResource TextMutedBrush}"/>
                    </Grid>
                </TabItem>

                <!-- Settings Tab -->
                <TabItem Style="{StaticResource MainTabItem}">
                    <TabItem.Header>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="âš™ï¸" FontSize="14" Margin="0,0,8,0"/>
                            <TextBlock Text="Settings"/>
                        </StackPanel>
                    </TabItem.Header>
                    <Grid Background="{StaticResource BackgroundDarkBrush}">
                        <TextBlock Text="Settings Page (Coming Soon)" 
                                   Style="{StaticResource Heading2}"
                                   HorizontalAlignment="Center"
                                   VerticalAlignment="Center"
                                   Foreground="{StaticResource TextMutedBrush}"/>
                    </Grid>
                </TabItem>

            </TabControl>

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <!-- FOOTER / STATUS BAR                                              -->
            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <Border Grid.Row="4"
                    Background="{StaticResource BackgroundMediumBrush}"
                    BorderBrush="{StaticResource BorderNormalBrush}"
                    BorderThickness="0,1,0,0"
                    Padding="12,6"
                    CornerRadius="0,0,8,8">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <!-- Connection Status -->
                    <StackPanel Grid.Column="0" Orientation="Horizontal">
                        <Ellipse Width="8" Height="8" Margin="0,0,8,0" VerticalAlignment="Center">
                            <Ellipse.Style>
                                <Style TargetType="Ellipse">
                                    <Setter Property="Fill" Value="{StaticResource AccentRedBrush}"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding IsConnected}" Value="True">
                                            <Setter Property="Fill" Value="{StaticResource AccentGreenBrush}"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Ellipse.Style>
                        </Ellipse>
                        <TextBlock VerticalAlignment="Center">
                            <TextBlock.Style>
                                <Style TargetType="TextBlock" BasedOn="{StaticResource SmallText}">
                                    <Setter Property="Text" Value="DÃ©connectÃ©"/>
                                    <Setter Property="Foreground" Value="{StaticResource TextMutedBrush}"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding IsConnected}" Value="True">
                                            <Setter Property="Text" Value="ConnectÃ©"/>
                                            <Setter Property="Foreground" Value="{StaticResource AccentGreenBrush}"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>
                    </StackPanel>

                    <!-- Version info -->
                    <TextBlock Grid.Column="1" 
                               Text="Rust Control Panel v2.0" 
                               Style="{StaticResource SmallTextMuted}"
                               VerticalAlignment="Center"/>
                </Grid>
            </Border>

        </Grid>
    </Border>
</Window>

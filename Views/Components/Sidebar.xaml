<!-- ════════════════════════════════════════════════════════════════════ -->
<!-- Sidebar.xaml - V3 FIXED (pas de StrokeLineCap en WPF)               -->
<!-- ════════════════════════════════════════════════════════════════════ -->

<UserControl x:Class="RustControlPanel.Views.Components.Sidebar"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Width="200">

    <Border Background="{DynamicResource ThemeBackground}"
            BorderBrush="{DynamicResource ThemeCardBorder}"
            BorderThickness="0,0,1,0">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Toggle button -->
            <Button x:Name="ToggleButton"
                    Grid.Row="0"
                    Click="OnToggleClick"
                    Width="32" Height="32"
                    Margin="0,12,12,12"
                    HorizontalAlignment="Right"
                    Background="Transparent"
                    BorderThickness="0"
                    Cursor="Hand">
                <Viewbox Width="16" Height="16">
                    <Canvas Width="24" Height="24">
                        <!-- Chevron -->
                        <Path x:Name="ChevronIcon"
                              Data="M9,18 L15,12 L9,6"
                              Stroke="{DynamicResource ThemeTextMuted}"
                              StrokeThickness="2"
                              RenderTransformOrigin="0.5,0.5">
                            <Path.RenderTransform>
                                <RotateTransform Angle="0"/>
                            </Path.RenderTransform>
                        </Path>
                    </Canvas>
                </Viewbox>
                <Button.Style>
                    <Style TargetType="Button">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{TemplateBinding Background}"
                                            CornerRadius="4">
                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Border>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#20FFFFFF"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </Button>

            <!-- Navigation items -->
            <StackPanel Grid.Row="1" Margin="8,0,8,8">
                
                <!-- Map (ACTIVE BY DEFAULT) -->
                <Border x:Name="MapItem"
                        Height="48"
                        Margin="0,0,0,4"
                        Background="#2800D9FF"
                        CornerRadius="6"
                        Cursor="Hand"
                        MouseLeftButtonDown="OnMapClick">
                    <Border.Style>
                        <Style TargetType="Border">
                            <Setter Property="Opacity" Value="1"/>
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#3800D9FF"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Border.Style>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="48"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- Icon - Map -->
                        <Viewbox Grid.Column="0" Width="22" Height="22" Margin="13,0,0,0">
                            <Canvas Width="24" Height="24">
                                <Path Data="M3,6 L9,3 L15,6 L21,3 L21,18 L15,21 L9,18 L3,21 Z M9,3 L9,18 M15,6 L15,21"
                                      Stroke="#00D9FF"
                                      StrokeThickness="1.5"
                                      Opacity="0.9"/>
                            </Canvas>
                        </Viewbox>

                        <!-- Text -->
                        <TextBlock x:Name="MapText"
                                   Grid.Column="1"
                                   Text="Map"
                                   FontSize="14"
                                   FontWeight="Medium"
                                   Foreground="{DynamicResource ThemeText}"
                                   VerticalAlignment="Center"
                                   Margin="8,0,0,0"/>
                    </Grid>
                </Border>

                <!-- Stats -->
                <Border x:Name="StatsItem"
                        Height="48"
                        Margin="0,0,0,4"
                        Background="Transparent"
                        CornerRadius="6"
                        Cursor="Hand"
                        MouseLeftButtonDown="OnStatsClick">
                    <Border.Style>
                        <Style TargetType="Border">
                            <Setter Property="Opacity" Value="1"/>
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#20FFFFFF"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Border.Style>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="48"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- Icon - Stats -->
                        <Viewbox Grid.Column="0" Width="22" Height="22" Margin="13,0,0,0">
                            <Canvas Width="24" Height="24">
                                <Path Data="M18,20 L18,10 M12,20 L12,4 M6,20 L6,14"
                                      Stroke="#00D9FF"
                                      StrokeThickness="1.5"
                                      Opacity="0.9"/>
                            </Canvas>
                        </Viewbox>

                        <!-- Text -->
                        <TextBlock x:Name="StatsText"
                                   Grid.Column="1"
                                   Text="Stats"
                                   FontSize="14"
                                   FontWeight="Medium"
                                   Foreground="{DynamicResource ThemeText}"
                                   VerticalAlignment="Center"
                                   Margin="8,0,0,0"/>
                    </Grid>
                </Border>

                <!-- Players -->
                <Border x:Name="PlayersItem"
                        Height="48"
                        Margin="0,0,0,4"
                        Background="Transparent"
                        CornerRadius="6"
                        Cursor="Hand"
                        MouseLeftButtonDown="OnPlayersClick">
                    <Border.Style>
                        <Style TargetType="Border">
                            <Setter Property="Opacity" Value="1"/>
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#20FFFFFF"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Border.Style>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="48"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- Icon - Players -->
                        <Viewbox Grid.Column="0" Width="22" Height="22" Margin="13,0,0,0">
                            <Canvas Width="24" Height="24">
                                <Path Data="M17,21 L17,19 Q17,16 14,16 L10,16 Q7,16 7,19 L7,21 M12,12 Q9,12 9,9 Q9,6 12,6 Q15,6 15,9 Q15,12 12,12 M22,21 L22,19 Q22,16.5 20,16 M18,6.5 Q20,6.5 20,9 Q20,11.5 18,12"
                                      Stroke="#00D9FF"
                                      StrokeThickness="1.5"
                                      Opacity="0.9"/>
                            </Canvas>
                        </Viewbox>

                        <!-- Text -->
                        <TextBlock x:Name="PlayersText"
                                   Grid.Column="1"
                                   Text="Players"
                                   FontSize="14"
                                   FontWeight="Medium"
                                   Foreground="{DynamicResource ThemeText}"
                                   VerticalAlignment="Center"
                                   Margin="8,0,0,0"/>
                    </Grid>
                </Border>

                <!-- Console -->
                <Border x:Name="ConsoleItem"
                        Height="48"
                        Margin="0,0,0,4"
                        Background="Transparent"
                        CornerRadius="6"
                        Cursor="Hand"
                        MouseLeftButtonDown="OnConsoleClick">
                    <Border.Style>
                        <Style TargetType="Border">
                            <Setter Property="Opacity" Value="1"/>
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#20FFFFFF"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Border.Style>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="48"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- Icon - Console -->
                        <Viewbox Grid.Column="0" Width="22" Height="22" Margin="13,0,0,0">
                            <Canvas Width="24" Height="24">
                                <Path Data="M4,17 L10,12 L4,7 M12,19 L20,19"
                                      Stroke="#00D9FF"
                                      StrokeThickness="1.5"
                                      Opacity="0.9"/>
                            </Canvas>
                        </Viewbox>

                        <!-- Text -->
                        <TextBlock x:Name="ConsoleText"
                                   Grid.Column="1"
                                   Text="Console"
                                   FontSize="14"
                                   FontWeight="Medium"
                                   Foreground="{DynamicResource ThemeText}"
                                   VerticalAlignment="Center"
                                   Margin="8,0,0,0"/>
                    </Grid>
                </Border>
            </StackPanel>
        </Grid>
    </Border>
    
</UserControl>

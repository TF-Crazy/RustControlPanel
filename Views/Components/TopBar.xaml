<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- TopBar.xaml - Extended stats bar with all server info               -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

<UserControl x:Class="RustControlPanel.Views.Components.TopBar"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:controls="clr-namespace:RustControlPanel.Views.Controls"
             Height="56">

    <Border Background="{DynamicResource ThemeTopBar}"
            BorderBrush="{DynamicResource ThemeCardBorder}"
            BorderThickness="0,0,0,1">
        <Grid Margin="12,8">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- Stats Grid -->
            <ScrollViewer Grid.Column="0"
                          HorizontalScrollBarVisibility="Auto"
                          VerticalScrollBarVisibility="Disabled">
                <StackPanel Orientation="Horizontal">
                    
                    <!-- Players -->
                    <Border Background="{DynamicResource ThemeCard}"
                            BorderBrush="{DynamicResource ThemeCardBorder}"
                            BorderThickness="1"
                            CornerRadius="4"
                            Width="90"
                            Height="40"
                            Padding="10,0"
                            Margin="0,0,8,0"
                            Effect="{DynamicResource GlassGlow}">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <Path Grid.Column="0"
                                  Data="M16,13C15.71,13 15.38,13 15.03,13.05C16.19,13.89 17,15 17,16.5V19H23V16.5C23,14.17 18.33,13 16,13M8,13C5.67,13 1,14.17 1,16.5V19H15V16.5C15,14.17 10.33,13 8,13M8,11A3,3 0 0,0 11,8A3,3 0 0,0 8,5A3,3 0 0,0 5,8A3,3 0 0,0 8,11M16,11A3,3 0 0,0 19,8A3,3 0 0,0 16,5A3,3 0 0,0 13,8A3,3 0 0,0 16,11Z"
                                  Fill="{DynamicResource ThemeAccent}"
                                  Stretch="Uniform"
                                  Width="14" Height="14"
                                  VerticalAlignment="Center"/>
                            
                            <StackPanel Grid.Column="1"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Center"
                                        Orientation="Horizontal">
                                <TextBlock Text="{Binding PlayerCount, FallbackValue=0}" 
                                           Foreground="{DynamicResource ThemeAccent}" 
                                           FontWeight="SemiBold"
                                           FontSize="12"
                                           VerticalAlignment="Center"/>
                                <TextBlock Text="/" 
                                           Foreground="{DynamicResource ThemeTextMuted}"
                                           FontSize="12"
                                           Margin="2,0"
                                           VerticalAlignment="Center"/>
                                <TextBlock Text="{Binding MaxPlayers, FallbackValue=50}" 
                                           Foreground="{DynamicResource ThemeTextSecondary}"
                                           FontSize="12"
                                           VerticalAlignment="Center"/>
                            </StackPanel>
                        </Grid>
                    </Border>

                    <!-- Queue -->
                    <Border Background="{DynamicResource ThemeCard}"
                            BorderBrush="{DynamicResource ThemeCardBorder}"
                            BorderThickness="1"
                            CornerRadius="4"
                            Width="80"
                            Height="40"
                            Padding="10,0"
                            Margin="0,0,8,0"
                            Effect="{DynamicResource GlassGlow}">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <Path Grid.Column="0"
                                  Data="M12,3L2,12H5V20H19V12H22L12,3M12,8.75A2.25,2.25 0 0,1 14.25,11A2.25,2.25 0 0,1 12,13.25A2.25,2.25 0 0,1 9.75,11A2.25,2.25 0 0,1 12,8.75M12,15C13.5,15 16.5,15.75 16.5,17.25V18H7.5V17.25C7.5,15.75 10.5,15 12,15Z"
                                  Fill="{DynamicResource ThemeAccentWarning}"
                                  Stretch="Uniform"
                                  Width="14" Height="14"
                                  VerticalAlignment="Center"/>
                            
                            <TextBlock Grid.Column="1"
                                       Text="{Binding QueueCount, FallbackValue=0}"
                                       HorizontalAlignment="Right"
                                       VerticalAlignment="Center"
                                       FontSize="12"
                                       FontWeight="SemiBold"
                                       Foreground="{DynamicResource ThemeAccentWarning}"/>
                        </Grid>
                    </Border>

                    <!-- Joining -->
                    <Border Background="{DynamicResource ThemeCard}"
                            BorderBrush="{DynamicResource ThemeCardBorder}"
                            BorderThickness="1"
                            CornerRadius="4"
                            Width="80"
                            Height="40"
                            Padding="10,0"
                            Margin="0,0,8,0"
                            Effect="{DynamicResource GlassGlow}">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <Path Grid.Column="0"
                                  Data="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z"
                                  Fill="{DynamicResource ThemeAccentSuccess}"
                                  Stretch="Uniform"
                                  Width="14" Height="14"
                                  VerticalAlignment="Center"/>
                            
                            <TextBlock Grid.Column="1"
                                       Text="{Binding JoiningCount, FallbackValue=0}"
                                       HorizontalAlignment="Right"
                                       VerticalAlignment="Center"
                                       FontSize="12"
                                       FontWeight="SemiBold"
                                       Foreground="{DynamicResource ThemeAccentSuccess}"/>
                        </Grid>
                    </Border>

                    <!-- FPS -->
                    <Border Background="{DynamicResource ThemeCard}"
                            BorderBrush="{DynamicResource ThemeCardBorder}"
                            BorderThickness="1"
                            CornerRadius="4"
                            Width="75"
                            Height="40"
                            Padding="10,0"
                            Margin="0,0,8,0"
                            Effect="{DynamicResource GlassGlow}">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <Path Grid.Column="0"
                                  Data="M13,2.05V2.03L13,2.05M16.35,3.85L16.34,3.84L16.35,3.85M5.66,20.34L5.65,20.33L5.66,20.34M20.34,18.34L20.34,18.33V18.34M19,13H21C21,17.97 16.97,22 12,22C7.03,22 3,17.97 3,13C3,8.03 7.03,4 12,4L12,6C8.13,6 5,9.13 5,13C5,16.87 8.13,20 12,20C15.87,20 19,16.87 19,13M12,9.5L16.5,13L12,16.5V9.5Z"
                                  Fill="{DynamicResource ThemeAccentSuccess}"
                                  Stretch="Uniform"
                                  Width="14" Height="14"
                                  VerticalAlignment="Center"/>
                            
                            <TextBlock Grid.Column="1"
                                       Text="{Binding ServerFps, StringFormat={}{0:F0}, FallbackValue=60}"
                                       HorizontalAlignment="Right"
                                       VerticalAlignment="Center"
                                       FontSize="12"
                                       FontWeight="SemiBold"
                                       Foreground="{DynamicResource ThemeAccentSuccess}"/>
                        </Grid>
                    </Border>

                    <!-- FPS Chart -->
                    <Border Background="{DynamicResource ThemeCard}"
                            BorderBrush="{DynamicResource ThemeCardBorder}"
                            BorderThickness="1"
                            CornerRadius="4"
                            Width="280"
                            Height="40"
                            Margin="0,0,8,0"
                            Effect="{DynamicResource GlassGlow}">
                        <controls:FpsChart Margin="4"/>
                    </Border>

                    <!-- Entity Time -->
                    <Border Background="{DynamicResource ThemeCard}"
                            BorderBrush="{DynamicResource ThemeCardBorder}"
                            BorderThickness="1"
                            CornerRadius="4"
                            MinWidth="80"
                            Height="40"
                            Padding="10,0"
                            Margin="0,0,8,0"
                            Effect="{DynamicResource GlassGlow}">
                        <StackPanel VerticalAlignment="Center">
                            <TextBlock Text="Entity"
                                       FontSize="9"
                                       Foreground="{DynamicResource ThemeTextMuted}"/>
                            <TextBlock Text="{Binding EntityTime, StringFormat={}{0:F1}ms, FallbackValue=2.5ms}"
                                       FontSize="11"
                                       FontWeight="SemiBold"
                                       Foreground="{DynamicResource ThemeText}"/>
                        </StackPanel>
                    </Border>

                    <!-- Game Time -->
                    <Border Background="{DynamicResource ThemeCard}"
                            BorderBrush="{DynamicResource ThemeCardBorder}"
                            BorderThickness="1"
                            CornerRadius="4"
                            MinWidth="80"
                            Height="40"
                            Padding="10,0"
                            Margin="0,0,8,0"
                            Effect="{DynamicResource GlassGlow}">
                        <StackPanel VerticalAlignment="Center">
                            <TextBlock Text="Game"
                                       FontSize="9"
                                       Foreground="{DynamicResource ThemeTextMuted}"/>
                            <TextBlock Text="{Binding GameTime, FallbackValue=12:34}"
                                       FontSize="11"
                                       FontWeight="SemiBold"
                                       Foreground="{DynamicResource ThemeText}"/>
                        </StackPanel>
                    </Border>

                    <!-- Uptime -->
                    <Border Background="{DynamicResource ThemeCard}"
                            BorderBrush="{DynamicResource ThemeCardBorder}"
                            BorderThickness="1"
                            CornerRadius="4"
                            MinWidth="100"
                            Height="40"
                            Padding="10,0"
                            Effect="{DynamicResource GlassGlow}">
                        <StackPanel VerticalAlignment="Center">
                            <TextBlock Text="Uptime"
                                       FontSize="9"
                                       Foreground="{DynamicResource ThemeTextMuted}"/>
                            <TextBlock Text="{Binding Uptime, FallbackValue=2d 4h 15m}"
                                       FontSize="11"
                                       FontWeight="SemiBold"
                                       Foreground="{DynamicResource ThemeText}"/>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </ScrollViewer>

            <!-- Actions -->
            <StackPanel Grid.Column="1" Orientation="Horizontal" Margin="8,0,0,0">
                <Button Content="ðŸ›"
                        Command="{Binding ToggleDebugCommand}"
                        Width="32" Height="32"
                        FontSize="14"
                        Background="Transparent"
                        BorderThickness="0"
                        Foreground="{DynamicResource ThemeTextMuted}"
                        Cursor="Hand"
                        ToolTip="Toggle Debug"
                        Margin="0,0,6,0">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Button">
                                        <Border Background="{TemplateBinding Background}"
                                                CornerRadius="4">
                                            <ContentPresenter HorizontalAlignment="Center" 
                                                              VerticalAlignment="Center"/>
                                        </Border>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#20FFFFFF"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>
                
                <Button Content="ðŸ”Œ"
                        Command="{Binding DisconnectCommand}"
                        Width="32" Height="32"
                        FontSize="14"
                        Background="Transparent"
                        BorderThickness="0"
                        Foreground="{DynamicResource ThemeTextMuted}"
                        Cursor="Hand"
                        ToolTip="Disconnect">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Button">
                                        <Border Background="{TemplateBinding Background}"
                                                CornerRadius="4">
                                            <ContentPresenter HorizontalAlignment="Center" 
                                                              VerticalAlignment="Center"/>
                                        </Border>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#20FFFFFF"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>
            </StackPanel>
        </Grid>
    </Border>
    
</UserControl>
